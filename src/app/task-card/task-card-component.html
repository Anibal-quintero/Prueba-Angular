<div class="task-card">
  <h2><span>{{task.id + 1}} - </span>{{ task.name }}</h2>
  <p>Fecha de entrega: {{ task.dueDate | date }}</p>
  <p>Estado: {{ task.isCompleted ? "Completada" : "Pendiente" }}</p>

  <!-- Bot칩n para agregar personas -->
  <button (click)="showPersonForm = !showPersonForm">Agregar Persona</button>

  <!-- Mostrar el formulario de personas al hacer clic en el bot칩n -->
  <div *ngIf="showPersonForm">
    <form [formGroup]="personForm" (ngSubmit)="addPerson()">
      <label>Nombre Completo:</label>
      <input formControlName="fullName" />
      <label>Edad:</label>
      <input type="number" formControlName="age" />

      <button type="submit">Agregar Persona</button>
    </form>
  </div>

  <!-- Mostrar personas con sus habilidades -->
  <ul *ngIf="task.people.length > 0">
    <li *ngFor="let person of task.people; let i = index">
      {{ person.fullName }} ({{ person.age }} a침os)

      <button (click)="deletePerson(task.id, i)">Eliminar persona</button>

      <!-- Si la persona tiene habilidades, mostrarlas en una lista -->
      <ul *ngIf="person.skills.length > 0">
        <li *ngFor="let skill of person.skills; let id = index">
          {{ skill.name }}
          <button (click)="deleteSkill(task.id, i, id)">(-)</button>
        </li>
      </ul>
      <button (click)="showSkillForm(i)">Agregar Habilidad</button>
    </li>
  </ul>

  <!-- Mostrar el formulario de habilidades al hacer clic en el bot칩n -->
  <div *ngIf="selectedPersonIndex !== null">
    <form [formGroup]="skillForm" (ngSubmit)="addSkill()">
      <label>Habilidad:</label>
      <input formControlName="name" />

      <button type="submit">Agregar Habilidad</button>
    </form>
  </div>
</div>
